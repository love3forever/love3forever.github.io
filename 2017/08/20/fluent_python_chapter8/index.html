<!DOCTYPE html>
<html lang="zh-cn">
  <head><meta name="generator" content="Hexo 3.8.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="description" content="å¯¹è±¡å¼•ç”¨ã€å¯å˜æ€§[æµç•…çš„Python]">




  <meta name="keywords" content="python,è¯»ä¹¦,å¯å˜ç±»å‹,æ·±æµ…æ‹·è´,">




  <link rel="alternate" href="/default" title="æ¬ç –å·¥çš„æ—¥å¸¸">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.4.x">



<link rel="canonical" href="http://eclipsesv.com/2017/08/20/fluent_python_chapter8/">


<meta name="description" content="è®°å½•ä¸€ä¸‹åœ¨è¯»ã€Šæµç¨‹çš„pythonã€‹æ—¶å¯¹è‡ªå·±æœ‰ç”¨çš„çŸ¥è¯†ç‚¹ã€‚">
<meta name="keywords" content="python,è¯»ä¹¦,å¯å˜ç±»å‹,æ·±æµ…æ‹·è´">
<meta property="og:type" content="article">
<meta property="og:title" content="å¯¹è±¡å¼•ç”¨ã€å¯å˜æ€§[æµç•…çš„Python]">
<meta property="og:url" content="http://eclipsesv.com/2017/08/20/fluent_python_chapter8/index.html">
<meta property="og:site_name" content="æ¬ç –å·¥çš„æ—¥å¸¸">
<meta property="og:description" content="è®°å½•ä¸€ä¸‹åœ¨è¯»ã€Šæµç¨‹çš„pythonã€‹æ—¶å¯¹è‡ªå·±æœ‰ç”¨çš„çŸ¥è¯†ç‚¹ã€‚">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2017-08-20T15:33:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å¯¹è±¡å¼•ç”¨ã€å¯å˜æ€§[æµç•…çš„Python]">
<meta name="twitter:description" content="è®°å½•ä¸€ä¸‹åœ¨è¯»ã€Šæµç¨‹çš„pythonã€‹æ—¶å¯¹è‡ªå·±æœ‰ç”¨çš„çŸ¥è¯†ç‚¹ã€‚">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.4.x">



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">





<script>
  var CONFIG = {
    search: true,
    searchPath: "/search.xml",
    fancybox: true,
    toc: true,
  }
</script>




  



    <title> å¯¹è±¡å¼•ç”¨ã€å¯å˜æ€§[æµç•…çš„Python] Â· æ¬ç –å·¥çš„æ—¥å¸¸ </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">æ¬ç –å·¥çš„æ—¥å¸¸</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/categories">
        <li class="mobile-menu-item">
          
          
            Categories
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">æ¬ç –å·¥çš„æ—¥å¸¸</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              é¦–é¡µ
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              å½’æ¡£
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              æ ‡ç­¾
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories">
            
            
              åˆ†ç±»
            
          </a>
        </li>
      
      
        <li class="menu-search">
          <form>
            <i class="iconfont icon-search" id="open-search"></i>
            <input type="text" class="search-input" id="search-input">
            <i class="iconfont icon-close" id="close-search"></i>
          </form>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          å¯¹è±¡å¼•ç”¨ã€å¯å˜æ€§[æµç•…çš„Python]
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017å¹´8æœˆ20æ—¥
        </span>
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-å˜é‡ä¸æ˜¯ç›’å­"><span class="toc-text">1. å˜é‡ä¸æ˜¯ç›’å­</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-æ ‡è¯†ã€ç›¸ç­‰æ€§å’Œåˆ«å"><span class="toc-text">2. æ ‡è¯†ã€ç›¸ç­‰æ€§å’Œåˆ«å</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-è¿ç®—ç¬¦iså’Œ"><span class="toc-text">3. è¿ç®—ç¬¦iså’Œ==</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-å…ƒç»„çš„ç›¸å¯¹ä¸å¯å˜æ€§"><span class="toc-text">4. å…ƒç»„çš„ç›¸å¯¹ä¸å¯å˜æ€§</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-copyå’Œdeepcopy"><span class="toc-text">5. copyå’Œdeepcopy</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-ä¸è¦ä½¿ç”¨å¯å˜ç±»å‹ä½œä¸ºå‚æ•°çš„é»˜è®¤å€¼"><span class="toc-text">6. ä¸è¦ä½¿ç”¨å¯å˜ç±»å‹ä½œä¸ºå‚æ•°çš„é»˜è®¤å€¼</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-é˜²å¾¡å¯å˜å‚æ•°"><span class="toc-text">7. é˜²å¾¡å¯å˜å‚æ•°</span></a></li></ol>
    </div>
  </div>


    <div class="post-content">
      
        <p>è®°å½•ä¸€ä¸‹åœ¨è¯»ã€Šæµç¨‹çš„pythonã€‹æ—¶å¯¹è‡ªå·±æœ‰ç”¨çš„çŸ¥è¯†ç‚¹ã€‚<br><a id="more"></a></p>
<h1 id="1-å˜é‡ä¸æ˜¯ç›’å­"><a href="#1-å˜é‡ä¸æ˜¯ç›’å­" class="headerlink" title="1. å˜é‡ä¸æ˜¯ç›’å­"></a>1. å˜é‡ä¸æ˜¯ç›’å­</h1><p>è¿›è¡Œèµ‹å€¼æ“ä½œçš„æ—¶å€™ï¼Œå¹¶ä¸æ˜¯å°†ä¸€ä¸ªå¯¹è±¡æ”¾åœ¨å˜é‡æ„æˆçš„<code>ç›’å­</code>ä¸­ã€‚å®é™…ä¸Šï¼Œåœ¨è¿›è¡Œèµ‹å€¼æ“ä½œçš„æ—¶å€™ï¼Œç­‰å·å³è¾¹çš„å¯¹è±¡æ˜¯åœ¨å®ƒè¢«åˆ›å»ºä¹‹åæ‰æŠŠç­‰å·å·¦è¾¹çš„å˜é‡åˆ†é…ç»™å®ƒï¼Œç›¸å½“äºç»™è¿™ä¸ªå¯¹è±¡è´´ä¸Šäº†ä¸€ä¸ªæ ‡ç­¾ğŸ·ï¸ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">In [1]: class Gizmo:</span><br><span class="line">   ...:     def __init__(self):</span><br><span class="line">   ...:         print(id(self))</span><br><span class="line">   ...:</span><br><span class="line"></span><br><span class="line">In [2]: x = Gizmo()</span><br><span class="line">4418370088</span><br><span class="line"></span><br><span class="line">In [3]: y = Gizmo()[0]</span><br><span class="line">4418271496</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">AttributeError                            Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input-3-81d29164ac5d&gt; in &lt;module&gt;()</span><br><span class="line">----&gt; 1 y = Gizmo()[0]</span><br><span class="line"></span><br><span class="line">AttributeError: Gizmo instance has no attribute &apos;__getitem__&apos;</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å°†å˜é‡xåˆ†é…ç»™ç±»Gizmoçš„ä¸€ä¸ªå®ä¾‹ä¹‹å‰ï¼ŒGizmoçš„å®ä¾‹å·²ç»è¢«åˆ›å»ºã€‚</p>
<h1 id="2-æ ‡è¯†ã€ç›¸ç­‰æ€§å’Œåˆ«å"><a href="#2-æ ‡è¯†ã€ç›¸ç­‰æ€§å’Œåˆ«å" class="headerlink" title="2. æ ‡è¯†ã€ç›¸ç­‰æ€§å’Œåˆ«å"></a>2. æ ‡è¯†ã€ç›¸ç­‰æ€§å’Œåˆ«å</h1><p>æ­£å¦‚ä¸Šè¾¹æ‰€è¯´ï¼Œå˜é‡ç›¸å½“äºæ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ ‡ç­¾ï¼Œå½“ç„¶ï¼Œä¸€ä¸ªå¯¹è±¡å¯ä»¥è¢«è´´ä¸Šè®¸å¤šæ ‡ç­¾ï¼Œå³å¤šä¸ªå˜é‡ç»‘å®šåŒä¸€ä¸ªå¯¹è±¡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">In [4]: list1 = [0,1,2,3,4,5]</span><br><span class="line"></span><br><span class="line">In [5]: list2 = list1</span><br><span class="line"></span><br><span class="line">In [6]: list2</span><br><span class="line">Out[6]: [0, 1, 2, 3, 4, 5]</span><br><span class="line"></span><br><span class="line">In [7]: list2.append(6)</span><br><span class="line"></span><br><span class="line">In [8]: list1</span><br><span class="line">Out[8]: [0, 1, 2, 3, 4, 5, 6]</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°list1å’Œlist2æ˜¯åŒä¸€ä¸ªå¯¹è±¡çš„ä¸åŒæ ‡ç­¾ã€‚<br>ä½†æ˜¯ï¼Œå¦‚ä½•æ‰èƒ½åˆ¤æ–­ä¸¤ä¸ªå˜é‡æ˜¯å¦ç»‘å®šçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Ÿ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [9]: list3 = [0,1,2,3,4,5,6]</span><br><span class="line"></span><br><span class="line">In [10]: list3 == list1 == list2</span><br><span class="line">Out[10]: True</span><br></pre></td></tr></table></figure></p>
<p>æ¥ç€ä¸Šè¾¹çš„ä¾‹å­ï¼Œæˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªå«åšlist3çš„å˜é‡ï¼Œå®ƒå’Œlist1ã€list2æ˜¯ç›¸ç­‰çš„ï¼Œä½†æ˜¯å®ƒä»¬ä¸‰ä¸ªç»‘å®šçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡å—ï¼Ÿpythonå®˜æ–¹æ–‡æ¡£ä¸­æœ‰è¿™æ ·çš„æè¿°ï¼š</p>
<blockquote>
<p>æ¯ä¸ªå˜é‡éƒ½æœ‰æ ‡è¯†ã€ç±»å‹å’Œå€¼ã€‚å¯¹è±¡ä¸€æ—¦åˆ›å»ºï¼Œå®ƒçš„æ ‡è¯†ç»å¯¹ä¸ä¼šå˜åŒ–ï¼›ä½ å¯ä»¥æŠŠæ ‡è¯†å½“ä½œè¯¥å¯¹è±¡åœ¨å†…å­˜ä¸­çš„åœ°å€ã€‚isè¿ç®—ç¬¦ç”¨ä»¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„æ ‡è¯†ï¼Œå†…å»ºå‡½æ•°<code>id()</code>è¿”å›å¯¹è±¡æ ‡è¯†çš„æ•´æ•°è¡¨ç¤ºã€‚</p>
</blockquote>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [12]: list1 is list2</span><br><span class="line">Out[12]: True</span><br><span class="line"></span><br><span class="line">In [13]: list3 is list1</span><br><span class="line">Out[13]: False</span><br><span class="line"></span><br><span class="line">In [14]: id(list1)</span><br><span class="line">Out[14]: 4418368144</span><br><span class="line"></span><br><span class="line">In [15]: id(list2)</span><br><span class="line">Out[15]: 4418368144</span><br><span class="line"></span><br><span class="line">In [16]: id(list3)</span><br><span class="line">Out[16]: 4418128064</span><br></pre></td></tr></table></figure>

å¯ä»¥çœ‹åˆ°`list1 is list2`å¹¶ä¸”`id(list1) == id(list2)`,è¿™è¯´æ˜list1å’Œlist2ç»‘å®šçš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œlist3åˆ™å’Œlist1æˆ–è€…list2ç»‘å®šçš„æ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œå³ä½¿æ˜¯`list3 == list1 == list2`
</code></pre><h1 id="3-è¿ç®—ç¬¦iså’Œ"><a href="#3-è¿ç®—ç¬¦iså’Œ" class="headerlink" title="3. è¿ç®—ç¬¦iså’Œ=="></a>3. è¿ç®—ç¬¦<code>is</code>å’Œ<code>==</code></h1><p>é€šè¿‡ä¸Šè¾¹çš„ä¾‹å­ï¼Œæœ‰ä¸ªç›´è§‚çš„å°è±¡å°±æ˜¯</p>
<blockquote>
<p><code>is</code>ç”¨äºæ¯”è¾ƒå¯¹è±¡çš„æ ‡è¯†ï¼Œ<code>==</code>ç”¨äºæ¯”è¾ƒå¯¹è±¡çš„å€¼</p>
</blockquote>
<pre><code>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šæ›´å¤šçš„ä½¿ç”¨`==`è¿›è¡Œå¯¹è±¡é—´çš„å€¼çš„æ¯”è¾ƒï¼Œä½†æ˜¯åœ¨&lt;strong&gt;å˜é‡å’Œå•ä¾‹å€¼ä¹‹é—´çš„æ¯”è¾ƒï¼Œæ›´åº”è¯¥ä½¿ç”¨`is`&lt;/strong&gt;ã€‚è¿™æ˜¯å› ä¸º: &lt;strong&gt;`is`è¿ç®—ç¬¦æ¯”`==`æ›´å¿«ï¼Œå› ä¸ºå®ƒä¸èƒ½é‡è½½ï¼Œè¿™æ ·pythonä¸ç”¨å¯»æ‰¾å¹¶è°ƒç”¨ç‰¹æ®Šæ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥æ¯”è¾ƒä¸¤ä¸ªæ•´æ•°IDã€‚`a == b`æ˜¯è¯­æ³•ç³–ï¼Œç­‰åŒäºæ‰§è¡Œ`a.__eq__(b)`ã€‚ç»§æ‰¿è‡ªobjectçš„`__eq__`æ–¹æ³•æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„IDï¼Œç»“æœå’Œ`is`ä¸€æ ·ï¼Œä½†æ˜¯å¤šæ•°å†…ç½®ç±»å‹éƒ½å®šä¹‰äº†æ›´æœ‰æ„ä¹‰çš„æ–¹å¼ï¼Œè¦†ç›–äº†`__eq__`ï¼Œè¿™æ ·å°±å¯èƒ½ä¼šç»™ç›¸ç­‰æ€§æµ‹è¯•å¸¦æ¥æ›´å¤šå¤æ‚çš„å¤„ç†å·¥ä½œã€‚&lt;/strong&gt;
</code></pre><h1 id="4-å…ƒç»„çš„ç›¸å¯¹ä¸å¯å˜æ€§"><a href="#4-å…ƒç»„çš„ç›¸å¯¹ä¸å¯å˜æ€§" class="headerlink" title="4. å…ƒç»„çš„ç›¸å¯¹ä¸å¯å˜æ€§"></a>4. å…ƒç»„çš„ç›¸å¯¹ä¸å¯å˜æ€§</h1><p>å…ƒç»„ä¸å¤šæ•°pythonçš„é›†åˆç±»å‹ä¸€æ ·ï¼ˆè¿™é‡Œçš„ä¸€æ ·æŒ‡çš„æ˜¯ï¼šåˆ—è¡¨ã€å­—å…¸ã€é›†ç­‰è€Œä¸åŒ…æ‹¬åƒæ˜¯strï¼Œbyteså’Œarray.arrayè¿™æ ·çš„å•ä¸€ç±»å‹åºåˆ—ï¼Œå®ƒä»¬ä¿å­˜çš„ä¸æ˜¯å¼•ç”¨ï¼Œè€Œæ˜¯åœ¨è¿ç»­å†…å­˜ä¸­ä¿å­˜çš„æ•°æ®æœ¬èº«ï¼‰ï¼Œä¿å­˜çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ã€‚æ‰€ä»¥ï¼Œå¦‚æœå¼•ç”¨çš„å…ƒç´ æ˜¯å¯å˜çš„ï¼Œå³ä½¿å…ƒç»„æœ¬èº«ä¸å˜ï¼Œå®ƒå…¶ä¸­çš„å…ƒç´ ä¹Ÿæ˜¯å¯å˜çš„ã€‚<strong>å…ƒç»„çš„ä¸å¯å˜æ€§ï¼ŒæŒ‡çš„æ˜¯å®ƒå…¶ä¸­ä¿å­˜çš„å¼•ç”¨ä¸å˜ï¼ˆæ•°æ®ç»“æ„å’Œç‰©ç†å†…å®¹ï¼‰ï¼Œä¸å¼•ç”¨çš„å¯¹è±¡æ— å…³</strong></p>
<h1 id="5-copyå’Œdeepcopy"><a href="#5-copyå’Œdeepcopy" class="headerlink" title="5. copyå’Œdeepcopy"></a>5. copyå’Œdeepcopy</h1><p>ç”±ä¸Šè¾¹çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œåƒåˆ—è¡¨ã€å­—å…¸ç­‰é›†åˆç±»å‹ï¼Œå®ƒä»¬å†…éƒ¨ä¿å­˜çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">In [33]: l1 = [3,[4,5,6],(7,8,9)]</span><br><span class="line"></span><br><span class="line">In [34]: l2 = list(l1)</span><br><span class="line"></span><br><span class="line">In [35]: l2</span><br><span class="line">Out[35]: [3, [4, 5, 6], (7, 8, 9)]</span><br><span class="line"></span><br><span class="line">In [36]: l1.append(0)</span><br><span class="line"></span><br><span class="line">In [37]: l1[1].append(&apos;x&apos;)</span><br><span class="line"></span><br><span class="line">In [38]: print(l1)</span><br><span class="line">[3, [4, 5, 6, &apos;x&apos;], (7, 8, 9), 0]</span><br><span class="line"></span><br><span class="line">In [39]: print(l2)</span><br><span class="line">[3, [4, 5, 6, &apos;x&apos;], (7, 8, 9)]</span><br><span class="line"></span><br><span class="line">In [40]: l2[1] += [&apos;y&apos;,&apos;z&apos;]</span><br><span class="line"></span><br><span class="line">In [41]: l2[2] += (&apos;x&apos;,&apos;y&apos;,&apos;z&apos;)</span><br><span class="line"></span><br><span class="line">In [42]: l1</span><br><span class="line">Out[42]: [3, [4, 5, 6, &apos;x&apos;, &apos;y&apos;, &apos;z&apos;], (7, 8, 9), 0]</span><br><span class="line"></span><br><span class="line">In [43]: l2</span><br><span class="line">Out[43]: [3, [4, 5, 6, &apos;x&apos;, &apos;y&apos;, &apos;z&apos;], (7, 8, 9, &apos;x&apos;, &apos;y&apos;, &apos;z&apos;)]</span><br></pre></td></tr></table></figure></p>
<p>In [33]å’ŒIn [34]è¿›è¡Œäº†ç®€å•çš„åˆ—è¡¨å¤åˆ¶ï¼Œé€šè¿‡å†…ç½®çš„æ„é€ å‡½æ•°æ¥å®Œæˆèµ‹å€¼ã€‚è¿™ä¸ªæ—¶å€™<code>l1 == l2</code>å¹¶ä¸”<code>l1 is not l2</code>å®ƒä»¬ç»‘å®šäº†ä¸åŒçš„å¯¹è±¡ã€‚æ‰€ä»¥In [36]ä¸­l1.append(0)å¹¶ä¸ä¼šå¯¹l2é€ æˆå½±å“ã€‚<br>ä½†æ˜¯ç”±äºåˆ—è¡¨å†…éƒ¨ä¿å­˜çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨ï¼Œæ‰€ä»¥<code>l1[1] == [4,5,6]</code>ï¼Œå¦‚æœå¯¹l1[1]è¿›è¡Œæ“ä½œï¼Œl2è‡ªç„¶ä¼šæ”¶åˆ°å½±å“ã€‚<br>In [40]å’ŒIn [41]åˆ†åˆ«å¯¹l2[1]å’Œl2[2]è¿›è¡Œæ“ä½œï¼Œåˆ—è¡¨åœ¨è¿›è¡Œ<code>+=</code>æ“ä½œä¹‹åï¼Œä¼šå°±åœ°ä¿®æ”¹åˆ—è¡¨ï¼Œä½†å¯¹äºå…ƒç»„æ¥è¯´<code>+=</code>æ“ä½œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å…ƒç»„ç„¶åé‡æ–°ç»‘å®šç»™å˜é‡<strong>l2[2]</strong>ï¼Œè¿™æ ·<code>l1[2]</code>å’Œ<code>l2[2]</code>å°±ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚ï¼ˆä¸ªäººè§‰å¾—ï¼Œä¸Šè¾¹çš„è¿™ä¸ªè¿‡ç¨‹å¯ä»¥å½“ä½œä¸€é“ä¼˜ç§€çš„é¢è¯•é¢˜ç›®ğŸ˜Šï¼‰</p>
<blockquote>
<p>å¯¹<code>+=</code>æˆ–è€…<code>*=</code>æ‰€åšçš„å¢é‡å¤åˆ¶æ“ä½œæ¥è¯´ï¼Œå¦‚æœæ“ä½œç¬¦å·¦ä¾§ç»‘å®šçš„æ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯å¯å˜å¯¹è±¡ï¼Œä¼šå°±åœ°ä¿®æ”¹</p>
</blockquote>
<pre><code>é»˜è®¤æƒ…å†µä¸‹ï¼Œpythonè¿›è¡Œçš„å¤åˆ¶éƒ½æ˜¯æµ…å¤åˆ¶ï¼ˆå‰¯æœ¬å…±äº«å†…éƒ¨å¯¹è±¡çš„å¼•ç”¨ï¼‰,é€šè¿‡copyæ¨¡å—æä¾›çš„deepcopyå’Œcopyå¯ä»¥ä¸ºä»»ä½•å¯¹è±¡åšæ·±å¤åˆ¶æˆ–è€…æµ…å¤åˆ¶ã€‚
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">In [55]: class Bus:</span><br><span class="line">    ...:     def __init__(self,passengers=None):</span><br><span class="line">    ...:         if passengers is None:</span><br><span class="line">    ...:             self.passengers = []</span><br><span class="line">    ...:         else:</span><br><span class="line">    ...:             self.passengers = passengers</span><br><span class="line">    ...:     def pick(self,name):</span><br><span class="line">    ...:         self.passengers.append(name)</span><br><span class="line">    ...:     def drop(self,name):</span><br><span class="line">    ...:         self.passengers.remove(name)</span><br><span class="line">    ...:</span><br><span class="line"></span><br><span class="line">In [56]: import copy</span><br><span class="line"></span><br><span class="line">In [57]: bus1 = Bus([&apos;wm&apos;,&apos;ws&apos;,&apos;ls&apos;,&apos;gjy&apos;])</span><br><span class="line"></span><br><span class="line">In [58]: bus2 = copy.copy(bus1)</span><br><span class="line"></span><br><span class="line">In [59]: bus3 = copy.deepcopy(bus1)</span><br><span class="line"></span><br><span class="line">In [60]: map(id,[bus1,bus2,bus3])</span><br><span class="line">Out[60]: [4418132448, 4416805992, 4416805920]</span><br><span class="line"></span><br><span class="line">In [61]: bus1.drop(&apos;wm&apos;)</span><br><span class="line"></span><br><span class="line">In [62]: bus2.passengers</span><br><span class="line">Out[62]: [&apos;ws&apos;, &apos;ls&apos;, &apos;gjy&apos;]</span><br><span class="line"></span><br><span class="line">In [63]: bus3.passengers</span><br><span class="line">Out[63]: [&apos;wm&apos;, &apos;ws&apos;, &apos;ls&apos;, &apos;gjy&apos;]</span><br><span class="line"></span><br><span class="line">In [64]: map(id,[bus1.passengers,bus2.passengers,bus3.passengers])</span><br><span class="line">Out[64]: [4419499288, 4419499288, 4418048440]</span><br></pre></td></tr></table></figure>

å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡deepcopyï¼Œbus3å’Œbus1ä¹‹é—´å¹¶æ²¡æœ‰å…±äº«å†…éƒ¨å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œé€šè¿‡copyç”Ÿæˆçš„bus2çš„`passengers`å’Œbus1æ˜¯ç›¸åŒçš„å¯¹è±¡ã€‚
</code></pre><h1 id="6-ä¸è¦ä½¿ç”¨å¯å˜ç±»å‹ä½œä¸ºå‚æ•°çš„é»˜è®¤å€¼"><a href="#6-ä¸è¦ä½¿ç”¨å¯å˜ç±»å‹ä½œä¸ºå‚æ•°çš„é»˜è®¤å€¼" class="headerlink" title="6. ä¸è¦ä½¿ç”¨å¯å˜ç±»å‹ä½œä¸ºå‚æ•°çš„é»˜è®¤å€¼"></a>6. ä¸è¦ä½¿ç”¨å¯å˜ç±»å‹ä½œä¸ºå‚æ•°çš„é»˜è®¤å€¼</h1><p>é€šè¿‡ä¸‹è¾¹çš„ä¾‹å­å¯ä»¥è¯æ˜ä¸Šè¾¹çš„è¿™æ¡å¿ å‘Šï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">In [67]: class HauntedBus:</span><br><span class="line">    ...:     def __init__(self,passengers=[]):</span><br><span class="line">    ...:         self.passengers = passengers</span><br><span class="line">    ...:     def pick(self,name):</span><br><span class="line">    ...:         self.passengers.append(name)</span><br><span class="line">    ...:     def drop(self,name):</span><br><span class="line">    ...:         self.passengers.remove(name)</span><br><span class="line">    ...:</span><br><span class="line"></span><br><span class="line">In [68]: bus1 = HauntedBus([&apos;wm&apos;,&apos;ws&apos;,&apos;ls&apos;])</span><br><span class="line"></span><br><span class="line">In [69]: bus1.passengers</span><br><span class="line">Out[69]: [&apos;wm&apos;, &apos;ws&apos;, &apos;ls&apos;]</span><br><span class="line"></span><br><span class="line">In [70]: bus1.pick(&apos;gjy&apos;)</span><br><span class="line"></span><br><span class="line">In [71]: bus1.drop(&apos;ws&apos;)</span><br><span class="line"></span><br><span class="line">In [72]: bus1.passengers</span><br><span class="line">Out[72]: [&apos;wm&apos;, &apos;ls&apos;, &apos;gjy&apos;]</span><br><span class="line"></span><br><span class="line">In [73]: bus2 = HauntedBus()</span><br><span class="line"></span><br><span class="line">In [74]: bus2.pick(&apos;wm&apos;)</span><br><span class="line"></span><br><span class="line">In [76]: bus2.passengers</span><br><span class="line">Out[76]: [&apos;wm&apos;]</span><br><span class="line"></span><br><span class="line">In [77]: bus3 = HauntedBus()</span><br><span class="line"></span><br><span class="line">In [78]: bus3.pick(&apos;ws&apos;)</span><br><span class="line"></span><br><span class="line">In [79]: bus3.passengers</span><br><span class="line">Out[79]: [&apos;wm&apos;, &apos;ws&apos;]</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ²¡æœ‰å®šä¹‰åˆå§‹ä¹˜å®¢çš„HauntedBuså®ä¾‹ä¼šå…±äº«åŒä¸€ä¸ªä¹˜å®¢åˆ—è¡¨ï¼Œè¿™æ˜¯å› ä¸º<code>self.passengers</code>å˜æˆäº†<code>passengers</code>å‚æ•°é»˜è®¤å€¼çš„åˆ«åï¼Œé»˜è®¤å€¼åœ¨å®šä¹‰å‡½æ•°æ—¶è®¡ç®—ï¼Œå› æ­¤é»˜è®¤å€¼å˜æˆäº†å‡½æ•°å¯¹è±¡çš„å±æ€§ï¼Œå› æ­¤ï¼Œå¦‚æœé»˜è®¤å€¼æ˜¯å¯å˜å¯¹è±¡ï¼Œå¹¶ä¸”ä¿®æ”¹äº†å®ƒçš„å€¼ï¼Œé‚£ä¹ˆåç»­çš„å‡½æ•°è°ƒç”¨éƒ½ä¼šæ”¶åˆ°å½±å“ã€‚</p>
<h1 id="7-é˜²å¾¡å¯å˜å‚æ•°"><a href="#7-é˜²å¾¡å¯å˜å‚æ•°" class="headerlink" title="7. é˜²å¾¡å¯å˜å‚æ•°"></a>7. é˜²å¾¡å¯å˜å‚æ•°</h1><p>å¦‚æœä¸€ä¸ªå‡½æ•°æ¥å—çš„æ˜¯å¯å˜å‚æ•°ï¼Œé‚£ä¹ˆåº”è¯¥è°¨æ…çš„è€ƒè™‘æ˜¯å¦æƒ³è¦ä¿®æ”¹ä¼ å…¥çš„å‚æ•°ï¼Œæ˜¯å¦æƒ³è¦å°†å¯¹è¿™ä¸ªå¯å˜å¯¹è±¡çš„ä¿®æ”¹ä½œç”¨åˆ°å‡½æ•°ä½“ä¹‹å¤–ï¼Ÿ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">In [81]: overwatch_team = [&apos;wm&apos;,&apos;ws&apos;,&apos;ls&apos;,&apos;gjy&apos;,&apos;ll&apos;]</span><br><span class="line"></span><br><span class="line">In [82]: class Twilightbus:</span><br><span class="line">    ...:     def __init__(self,passengers=None):</span><br><span class="line">    ...:         if passengers is None:</span><br><span class="line">    ...:             self.passengers = []</span><br><span class="line">    ...:         else:</span><br><span class="line">    ...:             self.passengers = passengers</span><br><span class="line">    ...:     def pick(self,name):</span><br><span class="line">    ...:         self.passengers.append(name)</span><br><span class="line">    ...:     def drop(self,name):</span><br><span class="line">    ...:         self.passengers.remove(name)</span><br><span class="line">    ...:</span><br><span class="line"></span><br><span class="line">In [83]: bus = Twilightbus(overwatch_team)</span><br><span class="line"></span><br><span class="line">In [84]: bus.drop(&apos;wm&apos;)</span><br><span class="line"></span><br><span class="line">In [85]: bus.drop(&apos;ws&apos;)</span><br><span class="line"></span><br><span class="line">In [86]: overwatch_team</span><br><span class="line">Out[86]: [&apos;ls&apos;, &apos;gjy&apos;, &apos;ll&apos;]</span><br></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°Twilightbuså¯ä»¥è®©ä¹˜å®¢è«åå…¶å¦™çš„é”€å£°åŒ¿è¿¹ğŸ˜¨ã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨å°†å‚æ•°passengerä¼ ç»™Twilightbusçš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯å°†<code>self.passengers</code>å˜æˆäº†passengersçš„åˆ«åï¼Œæ‰€ä»¥æ¯å½“ä¹˜å®¢ä¸‹è½¦æ‰§è¡Œ<code>drop()</code>çš„æ—¶å€™ï¼Œç›´æ¥å°†ä¹˜å®¢ä»åˆ—è¡¨ä¸­æŠ¹å»ã€‚<br>å¦‚æœæƒ³è¦é¿å…è¿™ç§çŠ¶å†µï¼Œå¯ä»¥åœ¨åˆå§‹åŒ–å‡½æ•°ä¸­åšä¸€äº›ä¿®æ”¹:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">def __init__(self,passengers):</span><br><span class="line">    if passengers is None:</span><br><span class="line">        self.passengers = []</span><br><span class="line">    else:</span><br><span class="line">        self.passengers = list(passengers)</span><br></pre></td></tr></table></figure></p>
<p>ç»è¿‡ä¸Šè¾¹è¿™æ ·çš„å†…éƒ¨å¤„ç†ï¼Œå°±ä¸ä¼šå‘ç”Ÿä¸Šè¾¹çš„å¹½çµå·´å£«æ¡ˆä»¶ã€‚æ‰€ä»¥ï¼Œåœ¨ç±»ä¸­ç›´æ¥æŠŠå‚æ•°å¤åˆ¶ç»™å®ä¾‹å˜é‡ä»¥å‰ä¸€å®šè¦è€ƒè™‘æ¸…æ¥šã€‚</p>

      
    </div>

    
      
      



      
      
  <div class="post-reward">
    <input type="checkbox" name="reward" id="reward" hidden>
    <label class="reward-button" for="reward">èµèµæ”¯æŒ</label>
    <div class="qr-code">
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="https://eclipsesv.com/pics/wpay.jpg" title="wechat">
        </label>
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="https://eclipsesv.com/pics/apay.jpg" title="alipay">
        </label>
      
    </div>
  </div>

    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/python/">python</a>
            
              <a href="/tags/è¯»ä¹¦/">è¯»ä¹¦</a>
            
              <a href="/tags/å¯å˜ç±»å‹/">å¯å˜ç±»å‹</a>
            
              <a href="/tags/æ·±æµ…æ‹·è´/">æ·±æµ…æ‹·è´</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2017/08/22/pythonâ”€Ğ·â•©Ñ—â•–â•œâ•–Ğ¸â•“â••â”€â•§/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">pythoné­”æœ¯æ–¹æ³•æŒ‡å—[è½¬]</span>
        <span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span>
      </a>
    
    
      <a class="next" href="/2017/08/10/Iterables,Iteratorsâ•‘â•Generators/">
        <span class="next-text nav-default">Iterables,Iteratorså’ŒGenerators</span>
        <span class="prev-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://eclipse-sv.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
  </div>


        </div>  
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:eclipse_sv@163.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
      
        
          <a href="https://github.com/love3forever" class="iconfont icon-github" title="github"></a>
        
      
    
      
    
      
    
      
    
    
    
      
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>


<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://hexo.io/">Hexo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2015 - 
    
    2018

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">eclipsesv</span>
  </span>
</div>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  

  
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://eclipsesv.com/2017/08/20/fluent_python_chapter8/';
        this.page.identifier = '2017/08/20/fluent_python_chapter8/';
        this.page.title = 'å¯¹è±¡å¼•ç”¨ã€å¯å˜æ€§[æµç•…çš„Python]';
    };
    (function() {
    var d = document, s = d.createElement('script');

    s.src = '//eclipse-sv.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();  
  </script>

  




    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.4.x"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.4.x"></script>

    
  <script type="text/html" id="search-result">
    <article class="post">
      <header class="post-header">
        <h1 class="post-title">
          <a href="$url$" class="post-link">
            $title$
          </a>
        </h1>
      </header>
      <div class="post-content">
        $content$
        <div class="read-more">
          <a href="$url$" class="read-more-link">
            é˜…è¯»æ›´å¤š
          </a>
        </div>
      </div>
    </article>
  </script>
  <script type="text/html" id="no-search-result">
    <div class="no-result">
      <h2>No result found!</h2>
    </div>
  </script>
  <script type="text/javascript" src="/js/src/search.js?v=2.4.x"></script>

  </body>
</html>
